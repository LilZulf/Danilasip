(function(t,n,e){"use strict";var o=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(n){return t.setTimeout(n,1e3/60)},i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(n){t.clearTimeout(n)},s=function(n){var e=[];for(var o in n=n.originalEvent||n||t.e,n=n.touches&&n.touches.length?n.touches:n.changedTouches&&n.changedTouches.length?n.changedTouches:[n],n)n[o].pageX?e.push({x:n[o].pageX,y:n[o].pageY}):n[o].clientX&&e.push({x:n[o].clientX,y:n[o].clientY});return e},a=function(t,n,e){return n&&t?"x"===e?t.x-n.x:"y"===e?t.y-n.y:Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)):0},c=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||e.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var n=0,o=t[0].attributes,i=o.length;n<i;n++)if("data-fancybox-"===o[n].nodeName.substr(0,14))return!0;return!1},r=function(n){var e=t.getComputedStyle(n)["overflow-y"],o=t.getComputedStyle(n)["overflow-x"],i=("scroll"===e||"auto"===e)&&n.scrollHeight>n.clientHeight,s=("scroll"===o||"auto"===o)&&n.scrollWidth>n.clientWidth;return i||s},l=function(t){for(var n=!1;n=r(t.get(0)),!n&&(t=t.parent(),t.length&&!t.hasClass("fancybox-stage")&&!t.is("body")););return n},u=function(t){var n=this;n.instance=t,n.$bg=t.$refs.bg,n.$stage=t.$refs.stage,n.$container=t.$refs.container,n.destroy(),n.$container.on("touchstart.fb.touch mousedown.fb.touch",e.proxy(n,"ontouchstart"))};u.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),e(n).off(".fb.touch"),t.requestId&&(i(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},u.prototype.ontouchstart=function(o){var i=this,r=e(o.target),u=i.instance,p=u.current,f=p.$slide,g=p.$content,h="touchstart"==o.type;if(h&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&f.length&&r.length&&!c(r)&&!c(r.parent())&&(r.is("img")||!(o.originalEvent.clientX>r[0].clientWidth+r.offset().left))){if(!p||u.isAnimating||p.$slide.hasClass("fancybox-animated"))return o.stopPropagation(),void o.preventDefault();i.realPoints=i.startPoints=s(o),i.startPoints.length&&(p.touch&&o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=r,i.$content=g,i.opts=p.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.canPan=u.canPan(),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(f[0].clientWidth),i.canvasHeight=Math.round(f[0].clientHeight),i.contentLastPos=null,i.contentStartPos=e.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=e.fancybox.getTranslate(f),i.stagePos=e.fancybox.getTranslate(u.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,e(n).off(".fb.touch").on(h?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",e.proxy(i,"ontouchend")).on(h?"touchmove.fb.touch":"mousemove.fb.touch",e.proxy(i,"ontouchmove")),e.fancybox.isMobile&&n.addEventListener("scroll",i.onscroll,!0),((i.opts||i.canPan)&&(r.is(i.$stage)||i.$stage.find(r).length)||(r.is(".fancybox-image")&&o.preventDefault(),e.fancybox.isMobile&&r.parents(".fancybox-caption").length))&&(i.isScrollable=l(r)||l(r.parent()),e.fancybox.isMobile&&i.isScrollable||o.preventDefault(),(1===i.startPoints.length||p.hasError)&&(i.canPan?(e.fancybox.stop(i.$content),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-is-grabbing")),2===i.startPoints.length&&"image"===p.type&&(p.isLoaded||p.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,e.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-e(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-e(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=a(i.startPoints[0],i.startPoints[1]))))}},u.prototype.onscroll=function(t){var e=this;e.isScrolling=!0,n.removeEventListener("scroll",e.onscroll,!0)},u.prototype.ontouchmove=function(t){var n=this;void 0===t.originalEvent.buttons||0!==t.originalEvent.buttons?n.isScrolling?n.canTap=!1:(n.newPoints=s(t),(n.opts||n.canPan)&&n.newPoints.length&&n.newPoints.length&&(n.isSwiping&&!0===n.isSwiping||t.preventDefault(),n.distanceX=a(n.newPoints[0],n.startPoints[0],"x"),n.distanceY=a(n.newPoints[0],n.startPoints[0],"y"),n.distance=a(n.newPoints[0],n.startPoints[0]),n.distance>0&&(n.isSwiping?n.onSwipe(t):n.isPanning?n.onPan():n.isZooming&&n.onZoom()))):n.ontouchend(t)},u.prototype.onSwipe=function(n){var s,a=this,c=a.instance,r=a.isSwiping,l=a.sliderStartPos.left||0;if(!0!==r)"x"==r&&(a.distanceX>0&&(a.instance.group.length<2||0===a.instance.current.index&&!a.instance.current.opts.loop)?l+=Math.pow(a.distanceX,.8):a.distanceX<0&&(a.instance.group.length<2||a.instance.current.index===a.instance.group.length-1&&!a.instance.current.opts.loop)?l-=Math.pow(-a.distanceX,.8):l+=a.distanceX),a.sliderLastPos={top:"x"==r?0:a.sliderStartPos.top+a.distanceY,left:l},a.requestId&&(i(a.requestId),a.requestId=null),a.requestId=o(function(){a.sliderLastPos&&(e.each(a.instance.slides,function(t,n){var o=n.pos-a.instance.currPos;e.fancybox.setTranslate(n.$slide,{top:a.sliderLastPos.top,left:a.sliderLastPos.left+o*a.canvasWidth+o*n.opts.gutter})}),a.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(a.distance)>10){if(a.canTap=!1,c.group.length<2&&a.opts.vertical?a.isSwiping="y":c.isDragging||!1===a.opts.vertical||"auto"===a.opts.vertical&&e(t).width()>800?a.isSwiping="x":(s=Math.abs(180*Math.atan2(a.distanceY,a.distanceX)/Math.PI),a.isSwiping=s>45&&s<135?"y":"x"),"y"===a.isSwiping&&e.fancybox.isMobile&&a.isScrollable)return void(a.isScrolling=!0);c.isDragging=a.isSwiping,a.startPoints=a.newPoints,e.each(c.slides,function(t,n){var o,i;e.fancybox.stop(n.$slide),o=e.fancybox.getTranslate(n.$slide),i=e.fancybox.getTranslate(c.$refs.stage),n.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,n){return(n.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),n.pos===c.current.pos&&(a.sliderStartPos.top=o.top-i.top,a.sliderStartPos.left=o.left-i.left),e.fancybox.setTranslate(n.$slide,{top:o.top-i.top,left:o.left-i.left})}),c.SlideShow&&c.SlideShow.isActive&&c.SlideShow.stop()}},u.prototype.onPan=function(){var t=this;a(t.newPoints[0],t.realPoints[0])<(e.fancybox.isMobile?10:5)?t.startPoints=t.newPoints:(t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&i(t.requestId),t.requestId=o(function(){e.fancybox.setTranslate(t.$content,t.contentLastPos)}))},u.prototype.limitMovement=function(){var t,n,e,o,i,s,a=this,c=a.canvasWidth,r=a.canvasHeight,l=a.distanceX,u=a.distanceY,p=a.contentStartPos,f=p.left,g=p.top,h=p.width,d=p.height;return i=h>c?f+l:f,s=g+u,t=Math.max(0,.5*c-.5*h),n=Math.max(0,.5*r-.5*d),e=Math.min(c-h,.5*c-.5*h),o=Math.min(r-d,.5*r-.5*d),l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<e&&(i=e+1-Math.pow(e-f-l,.8)||0),u>0&&s>n&&(s=n-1+Math.pow(-n+g+u,.8)||0),u<0&&s<o&&(s=o+1-Math.pow(o-g-u,.8)||0),{top:s,left:i}},u.prototype.limitPosition=function(t,n,e,o){var i=this,s=i.canvasWidth,a=i.canvasHeight;return e>s?(t=t>0?0:t,t=t<s-e?s-e:t):t=Math.max(0,s/2-e/2),o>a?(n=n>0?0:n,n=n<a-o?a-o:n):n=Math.max(0,a/2-o/2),{top:n,left:t}},u.prototype.onZoom=function(){var n=this,s=n.contentStartPos,c=s.width,r=s.height,l=s.left,u=s.top,p=a(n.newPoints[0],n.newPoints[1]),f=p/n.startDistanceBetweenFingers,g=Math.floor(c*f),h=Math.floor(r*f),d=(c-g)*n.percentageOfImageAtPinchPointX,P=(r-h)*n.percentageOfImageAtPinchPointY,b=(n.newPoints[0].x+n.newPoints[1].x)/2-e(t).scrollLeft(),m=(n.newPoints[0].y+n.newPoints[1].y)/2-e(t).scrollTop(),y=b-n.centerPointStartX,v=m-n.centerPointStartY,x=l+(d+y),w=u+(P+v),S={top:w,left:x,scaleX:f,scaleY:f};n.canTap=!1,n.newWidth=g,n.newHeight=h,n.contentLastPos=S,n.requestId&&i(n.requestId),n.requestId=o(function(){e.fancybox.setTranslate(n.$content,n.contentLastPos)})},u.prototype.ontouchend=function(t){var o=this,a=o.isSwiping,c=o.isPanning,r=o.isZooming,l=o.isScrolling;if(o.endPoints=s(t),o.dMs=Math.max((new Date).getTime()-o.startTime,1),o.$container.removeClass("fancybox-is-grabbing"),e(n).off(".fb.touch"),n.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap)return o.onTap(t);o.speed=100,o.velocityX=o.distanceX/o.dMs*.5,o.velocityY=o.distanceY/o.dMs*.5,c?o.endPanning():r?o.endZooming():o.endSwiping(a,l)},u.prototype.endSwiping=function(t,n){var o=this,i=!1,s=o.instance.group.length,a=Math.abs(o.distanceX),c="x"==t&&s>1&&(o.dMs>130&&a>10||a>50),r=300;o.sliderLastPos=null,"y"==t&&!n&&Math.abs(o.distanceY)>50?(e.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,250)):c&&o.distanceX>0?i=o.instance.previous(r):c&&o.distanceX<0&&(i=o.instance.next(r)),!1!==i||"x"!=t&&"y"!=t||o.instance.centerSlide(200),o.$container.removeClass("fancybox-is-sliding")},u.prototype.endPanning=function(){var t,n,o,i=this;i.contentLastPos&&(!1===i.opts.momentum||i.dMs>350?(t=i.contentLastPos.left,n=i.contentLastPos.top):(t=i.contentLastPos.left+500*i.velocityX,n=i.contentLastPos.top+500*i.velocityY),o=i.limitPosition(t,n,i.contentStartPos.width,i.contentStartPos.height),o.width=i.contentStartPos.width,o.height=i.contentStartPos.height,e.fancybox.animate(i.$content,o,366))},u.prototype.endZooming=function(){var t,n,o,i,s=this,a=s.instance.current,c=s.newWidth,r=s.newHeight;s.contentLastPos&&(t=s.contentLastPos.left,n=s.contentLastPos.top,i={top:n,left:t,width:c,height:r,scaleX:1,scaleY:1},e.fancybox.setTranslate(s.$content,i),c<s.canvasWidth&&r<s.canvasHeight?s.instance.scaleToFit(150):c>a.width||r>a.height?s.instance.scaleToActual(s.centerPointStartX,s.centerPointStartY,150):(o=s.limitPosition(t,n,c,r),e.fancybox.animate(s.$content,o,150)))},u.prototype.onTap=function(n){var o,i=this,a=e(n.target),c=i.instance,r=c.current,l=n&&s(n)||i.startPoints,u=l[0]?l[0].x-e(t).scrollLeft()-i.stagePos.left:0,p=l[0]?l[0].y-e(t).scrollTop()-i.stagePos.top:0,f=function(t){var o=r.opts[t];if(e.isFunction(o)&&(o=o.apply(c,[r,n])),o)switch(o){case"close":c.close(i.startEvent);break;case"toggleControls":c.toggleControls();break;case"next":c.next();break;case"nextOrClose":c.group.length>1?c.next():c.close(i.startEvent);break;case"zoom":"image"==r.type&&(r.isLoaded||r.$ghost)&&(c.canPan()?c.scaleToFit():c.isScaledDown()?c.scaleToActual(u,p):c.group.length<2&&c.close(i.startEvent))}};if((!n.originalEvent||2!=n.originalEvent.button)&&(a.is("img")||!(u>a[0].clientWidth+a.offset().left))){if(a.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(a.is(".fancybox-slide"))o="Slide";else{if(!c.current.$content||!c.current.$content.find(a).addBack().filter(a).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(u-i.tapX)>50||Math.abs(p-i.tapY)>50)return this;f("dblclick"+o)}else i.tapX=u,i.tapY=p,r.opts["dblclick"+o]&&r.opts["dblclick"+o]!==r.opts["click"+o]?i.tapped=setTimeout(function(){i.tapped=null,c.isAnimating||f("click"+o)},500):f("click"+o);return this}},e(n).on("onActivate.fb",function(t,n){n&&!n.Guestures&&(n.Guestures=new u(n))}).on("beforeClose.fb",function(t,n){n&&n.Guestures&&n.Guestures.destroy()})})(window,document,jQuery);